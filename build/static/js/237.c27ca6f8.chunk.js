"use strict";(self.webpackChunkfinal_project_frontend=self.webpackChunkfinal_project_frontend||[]).push([[237],{1906:function(e,n,t){t.r(n),t.d(n,{default:function(){return ae}});var i=t(4165),r=t(2982),a=t(1413),o=t(5861),c=t(885),s=t(2791),l=t(7002),d=t(6015),h=t(2455),x=t(4565),p=t(5209),u=t(1872),m=t(7205),f=t(1137),g=t(3746),j=t(1992),Z=t(5777),v=t(7237),b=t(7488),C=t(9954),k=t(7689),y=t(5985),w=t(184),N=function(e){var n,t,i=e.comic,r=(0,s.useState)(!0),a=(0,c.Z)(r,2),o=a[0],l=a[1],h=S(),N=((0,k.useParams)().id,(0,k.useNavigate)()),I=(0,s.useMemo)((function(){var e;return null===(e=i.Chaps)||void 0===e?void 0:e.length}),[i]);return(0,w.jsxs)("div",{className:h.comicInfoWrapper,children:[(0,w.jsx)("img",{src:i.image,alt:i.name,className:h.imageCard}),(0,w.jsxs)("div",{style:{flex:1},children:[(0,w.jsx)(x.Z,{fontSize:"28px",textTransform:"uppercase",mb:1,children:i.name}),(0,w.jsxs)(d.Z,{display:"flex",alignItems:"center",my:2,children:[(0,w.jsx)(x.Z,{sx:{marginRight:"10px"},children:"T\xe1c gi\u1ea3:"}),null===(n=i.Authors)||void 0===n?void 0:n.map((function(e){return(0,w.jsx)(p.Z,{sx:{bgcolor:"#ff8a80","&:hover":{backgroundColor:"#ef9a9a"},marginLeft:"10px"},label:e.name,component:"a",href:"#basic-chip",clickable:!0},e.id)}))]}),(0,w.jsxs)(d.Z,{display:"flex",flexWrap:"wrap",lineHeight:"50px",alignItems:"center",children:[(0,w.jsx)(x.Z,{sx:{marginRight:"5px"},children:"Th\u1ec3 lo\u1ea1i"}),(0,w.jsx)(f.Z,{}),":",null===(t=i.Genres)||void 0===t?void 0:t.map((function(e){return(0,w.jsx)(p.Z,{sx:{bgcolor:"#ff8a80","&:hover":{backgroundColor:"#ef9a9a"},marginLeft:"10px"},label:e.name,component:"a",href:"#basic-chip",clickable:!0},e.id)}))]}),(0,w.jsxs)(d.Z,{display:"flex",my:2,gap:2,children:[(0,w.jsxs)(d.Z,{display:"flex",children:[(0,w.jsx)(g.Z,{}),(0,w.jsx)(x.Z,{sx:{ml:"10px",color:"#ea6016"},children:i.viewCount}),(0,w.jsx)(x.Z,{ml:1,children:"L\u01b0\u1ee3t Xem"})]}),(0,w.jsx)(u.Z,{sx:{borderColor:"#757575"},orientation:"vertical",flexItem:!0}),(0,w.jsxs)(d.Z,{display:"flex",children:[(0,w.jsx)(v.Z,{}),(0,w.jsx)(x.Z,{sx:{ml:"10px",color:"#ea6016"},children:i.voteCount}),(0,w.jsx)(x.Z,{ml:1,children:"L\u01b0\u1ee3t th\xedch"})]}),(0,w.jsx)(u.Z,{sx:{borderColor:"#757575"},orientation:"vertical",flexItem:!0}),(0,w.jsxs)(d.Z,{display:"flex",children:[(0,w.jsx)(j.Z,{}),(0,w.jsx)(x.Z,{sx:{ml:"10px",color:"#ea6016"},children:I}),(0,w.jsx)(x.Z,{ml:1,children:"Ch\u01b0\u01a1ng"})]})]}),(0,w.jsxs)(d.Z,{display:"inline-flex",children:[(0,w.jsx)(x.Z,{mr:1,children:"N\u1ed9i dung"}),(0,w.jsx)(Z.Z,{}),"\xa0",":"]}),i.description.length<250?(0,w.jsx)("span",{style:{marginLeft:"5px"},children:i.description}):o?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{style:{marginLeft:"5px"},children:(0,C.Sy)(i.description,i.description.length/2)}),(0,w.jsx)(x.Z,{mt:1,onClick:function(){return l(!o)},color:"primary.main",sx:{cursor:"pointer"},children:"Xem th\xeam"})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{style:{marginLeft:"5px"},children:i.description}),(0,w.jsx)(x.Z,{mt:1,onClick:function(){return l(!o)},color:"primary.main",sx:{cursor:"pointer"},children:"Thu g\u1ecdn"})]}),(0,w.jsxs)(d.Z,{display:"flex",mt:5,width:"50%",children:[(0,w.jsx)(m.Z,{onClick:function(){i&&i.Chaps&&i.Chaps.length>0?N((0,C.No)(i.name,i.Chaps[i.Chaps.length-1].chapName,i.Chaps[i.Chaps.length-1].id)):y.Am.error("Truy\u1ec7n ch\u01b0a c\xf3 chap n\xe0o , h\u1ec7 th\u1ed1ng s\u1ebd c\u1eadp nh\u1eadt ngay khi c\xf3 chap",{containerId:"B"})},sx:{flex:1,fontSize:"18px",borderRadius:"8px"},variant:"contained",children:"\u0110\u1ecdc truy\u1ec7n"}),(0,w.jsxs)(m.Z,{sx:{ml:2,flex:1,fontSize:"18px",bgcolor:"#ff9d11",borderRadius:"8px","&:hover":{bgcolor:"#ffa726"}},variant:"contained",children:[(0,w.jsx)(b.Z,{})," \xa0 Y\xeau th\xedch"]})]})]})]})},S=(0,h.Z)((function(e){return{comicInfoWrapper:{display:"flex",backgroundColor:e.palette.background.default,padding:e.spacing(2)},imageCard:{height:"320px",width:"240px",objectFit:"cover",marginRight:e.spacing(3),flexShrink:0}}})),I=t(9434),L=t(4293),B=t(166),R=function(e){var n=e.children,t=e.index,i=e.value;return(0,w.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(t),hidden:i!==t,"aria-labelledby":"tab-".concat(t),children:i===t&&n})},T=t(5953),z=t(5814),W=t(7962),D=t(1087),F=function(e){var n=e.chapList,t=e.bookName,i=P();return(0,w.jsx)(T.ZP,{sx:{mt:1},container:!0,spacing:2,children:(0,C.qi)(n,"chapName",!0).reverse().map((function(e){return(0,w.jsx)(T.ZP,{item:!0,xs:3,children:e.chapName.length<23?(0,w.jsx)(D.rU,{style:{textDecoration:"none"},to:(0,C.No)(t,e.chapName,e.id),children:(0,w.jsx)(m.Z,{variant:"outlined",className:i.chapNameButton,children:e.chapName})}):(0,w.jsx)(z.Z,{classes:{tooltip:i.customTooltip},arrow:!0,TransitionComponent:W.Z,TransitionProps:{timeout:600},placement:"top",title:e.chapName,children:(0,w.jsx)(D.rU,{style:{textDecoration:"none"},to:(0,C.No)(t,e.chapName,e.id),children:(0,w.jsx)(m.Z,{variant:"outlined",className:i.chapNameButton,children:e.chapName})})})},e.id)}))})},P=(0,h.Z)((function(e){return{imageCard:{height:"320px",width:"240px",objectFit:"cover",marginRight:e.spacing(3)},customTooltip:{backgroundColor:"#e3f2fd",fontSize:"14px",color:e.palette.text.primary,width:"200px"},chapNameButton:{width:"200px",color:e.palette.text.primary,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&.MuiButton-outlined":{borderColor:"rgba(0,0,0,.12)"}}}})),A=t(3978),M=t(5065),U=t(1686),_=function(e){var n=e.handleCreateComment,t=E(),i=(0,k.useLocation)(),r=(0,s.useState)(""),a=(0,c.Z)(r,2),o=a[0],l=a[1];return(0,s.useEffect)((function(){l("")}),[i.pathname]),(0,w.jsx)("div",{children:(0,w.jsxs)(d.Z,{display:"flex",mb:1,margin:"30px 0px",gap:1,height:"auto",children:[(0,w.jsx)(A.Z,{sx:{width:50,height:50}}),(0,w.jsxs)(d.Z,{display:"flex",flexDirection:"column",gap:2,flex:1,children:[(0,w.jsx)(M.Z,{size:"small",value:o,fullWidth:!0,placeholder:"B\xecnh lu\u1eadn g\xec \u0111\xf3 !",variant:"outlined",onChange:function(e){return l(e.target.value)},InputProps:{classes:{notchedOutline:t.borderComment}}}),(0,w.jsx)(d.Z,{alignSelf:"flex-end",px:"14px",children:(0,w.jsx)(m.Z,{onClick:function(){o&&(l(""),n(o))},endIcon:(0,w.jsx)(U.Z,{}),size:"small",variant:"contained",children:"B\xecnh lu\u1eadn"})})]})]})})},E=(0,h.Z)((function(e){return{borderComment:{borderTop:"none",borderLeft:"none",borderRight:"none",left:"14px",right:"14px",borderRadius:"0px"}}})),G=t(1834),H=t(4732),O=function(e){var n,t=e.comment;return(0,w.jsx)("div",{children:(0,w.jsxs)(d.Z,{display:"flex",mb:1,margin:"30px 0px",gap:3,height:"auto",alignItems:"center",children:[(0,w.jsx)(A.Z,{sx:{width:50,height:50}}),(0,w.jsxs)(d.Z,{children:[(0,w.jsxs)(d.Z,{display:"flex",gap:3,children:[(0,w.jsx)(x.Z,{fontWeight:"bold",mb:2,whiteSpace:"nowrap",children:null===(n=t.User)||void 0===n?void 0:n.username}),(0,w.jsx)(x.Z,{mb:2,whiteSpace:"nowrap",children:(0,G.Z)(new Date(t.createdAt),{locale:H.Z,addSuffix:!0})})]}),(0,w.jsx)(x.Z,{whiteSpace:"nowrap",children:t.content})]})]})})},X=t(4520),q=function(e){var n=e.commentList,t=e.checkCommentList;return(0,w.jsxs)("div",{children:[t.length>0&&(0,w.jsxs)(d.Z,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,children:[(0,w.jsx)(X.Z,{sx:{fontSize:"100px"}}),(0,w.jsx)(x.Z,{variant:"h5",color:"#889096",children:"Ch\u01b0a c\xf3 b\xecnh lu\u1eadn n\xe0o"}),(0,w.jsx)(x.Z,{fontSize:"20px",children:"H\xe3y l\xe0 ng\u01b0\u1eddi \u0111\u1ea7u ti\xean b\xecnh lu\u1eadn"})]}),n.map((function(e){return(0,w.jsx)(d.Z,{display:"flex",flexDirection:"column",children:(0,w.jsx)(O,{comment:e})},e.id)}))]})},Y=t(7982),J=t(3938),K=t(7943),Q=t(7278),V=function(){var e=$(),n=(0,s.useState)(!1),t=(0,c.Z)(n,2),a=t[0],l=t[1],d=(0,s.useState)([]),h=(0,c.Z)(d,2),p=h[0],u=h[1],m=(0,I.I0)(),f=(0,I.v9)((function(e){return e.profile.user})),g=(0,I.v9)((function(e){return e.comicReader.comicInfo})),j=(0,I.v9)((function(e){return e.comic.commentList})),Z=(0,s.useCallback)(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),t={bookId:null===g||void 0===g?void 0:g.id,content:n},e.next=4,m((0,Y.z)(J.i.createComment,"post",t));case 4:e.sent.success&&(u([]),v(),l(!1)),l(!1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[null===g||void 0===g?void 0:g.id,m]),v=(0,s.useCallback)((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,m((0,Y.z)("".concat(J.i.getAllCommentByBook,"/").concat(null===g||void 0===g?void 0:g.id),"get"));case 3:(n=e.sent).success&&(0===n.data.length&&u([1]),m((0,K.v3)((0,r.Z)(n.data))),l(!1)),l(!1);case 6:case"end":return e.stop()}}),e)}))),[null===g||void 0===g?void 0:g.id,m]);return(0,s.useEffect)((function(){j.length>0&&j[0].bookId===(null===g||void 0===g?void 0:g.id)||v()}),[v]),(0,w.jsxs)("div",{className:e.root,children:[a&&(0,w.jsx)(Q.Z,{}),(0,w.jsx)(x.Z,{variant:"h4",children:"B\xecnh lu\u1eadn ( ".concat(j.length," )")}),f?(0,w.jsx)(_,{handleCreateComment:Z}):(0,w.jsx)(x.Z,{textAlign:"center",my:2,children:"B\u1ea1n c\u1ea7n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 b\xecnh lu\u1eadn"}),(0,w.jsx)(q,{checkCommentList:p,commentList:j})]})},$=(0,h.Z)((function(e){return{root:{padding:e.spacing(3)},borderComment:{borderTop:"none",borderLeft:"none",borderRight:"none",left:"14px",right:"14px",borderRadius:"0px"}}})),ee=function(e){var n=e.chapList,t=e.bookName,i=(e.chapterList,(0,s.useState)(0)),r=(0,c.Z)(i,2),o=r[0],l=r[1],h=ne(),x=function(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}};return(0,w.jsxs)("div",{className:h.comicInfoNavigationWrapper,children:[(0,w.jsx)(d.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,w.jsxs)(L.Z,{value:o,onChange:function(e,n){l(n)},children:[(0,w.jsx)(B.Z,(0,a.Z)({label:"Ch\u01b0\u01a1ng"},x(0))),(0,w.jsx)(B.Z,(0,a.Z)({label:"B\xecnh lu\u1eadn"},x(1)))]})}),(0,w.jsx)(R,{index:0,value:o,children:(0,w.jsx)(F,{bookName:t,chapList:n})}),(0,w.jsx)(R,{index:1,value:o,children:(0,w.jsx)(V,{})})]})},ne=(0,h.Z)((function(e){return{comicInfoNavigationWrapper:{backgroundColor:e.palette.background.default,padding:e.spacing(2),width:"75%"},imageCard:{height:"320px",width:"240px",objectFit:"cover",marginRight:e.spacing(3)}}})),te=function(e){var n=e.relationComics,t=e.totalRelevantBooksChap,i=ie(),r=((0,k.useNavigate)(),(0,s.useCallback)((function(e){var n;return null===(n=t.find((function(n){return n.bookId===e})))||void 0===n?void 0:n.count}),[t]));return(0,w.jsxs)("div",{className:i.relateComicWrapper,children:[(0,w.jsx)(x.Z,{variant:"h4",children:"Truy\u1ec7n T\u01b0\u01a1ng T\u1ef1"}),n.map((function(e){var n,t,a;return(0,w.jsx)(D.rU,{style:{textDecoration:"none",color:"unset"},to:"/details/".concat(e.id),children:(0,w.jsxs)(d.Z,{mt:2,display:"flex",width:"250px",height:"106px",justifyContent:"space-between",children:[(0,w.jsx)(d.Z,{width:"30%",children:(0,w.jsx)("img",{src:e.image,alt:e.name,className:i.imageCard})}),(0,w.jsxs)(d.Z,{paddingLeft:2,width:"70%",display:"flex",flexDirection:"column",justifyContent:"space-between",children:[(0,w.jsx)("div",{className:i.comicTitle,children:(0,w.jsx)(x.Z,{variant:"h6",children:e.name})}),(0,w.jsx)(x.Z,{variant:"body2",color:"text.secondary",children:null===(n=e.Genres)||void 0===n||null===(t=n[Math.floor(Math.random()*(null===(a=e.Genres)||void 0===a?void 0:a.length))])||void 0===t?void 0:t.name}),(0,w.jsx)(x.Z,{variant:"body2",color:"text.secondary",children:"".concat(r(e.id)," ch\u01b0\u01a1ng")})]})]},e.id)},e.id)}))]})},ie=(0,h.Z)((function(e){return{relateComicWrapper:{backgroundColor:e.palette.background.default,padding:e.spacing(2),width:"25%"},imageCard:{width:"100%",height:"100%",objectFit:"cover"},comicTitle:{whiteSpace:"normal",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2",overflow:"hidden"}}})),re=t(8812),ae=function(){var e=(0,s.useState)(),n=(0,c.Z)(e,2),t=n[0],h=n[1],x=(0,s.useState)(!1),p=(0,c.Z)(x,2),u=p[0],m=p[1],f=(0,s.useState)([]),g=(0,c.Z)(f,2),j=g[0],Z=g[1],v=(0,s.useState)([]),b=(0,c.Z)(v,2),C=b[0],y=b[1],S=(0,I.I0)(),L=oe(),B=(0,k.useParams)().id,R=(0,s.useCallback)((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,S((0,Y.z)("".concat(J.i.bookById,"/").concat(B),"get"));case 3:n=e.sent,h((0,a.Z)({},n.data.book)),Z((0,r.Z)(n.data.relevantBooks)),y((0,r.Z)(n.data.totalRelevantBooksChap)),S((0,re.R)((0,a.Z)({},n.data.book))),m(!1);case 9:case"end":return e.stop()}}),e)}))),[S,B]);return(0,s.useEffect)((function(){R()}),[R]),(0,w.jsx)(l.Z,{background:"background.neutral",isReadScreen:!1,children:(0,w.jsxs)("div",{className:L.root,children:[u&&(0,w.jsx)(Q.Z,{}),t&&!u&&(0,w.jsx)(N,{comic:t}),(0,w.jsxs)(d.Z,{display:"flex",mt:3,alignItems:"flex-start",gap:2,children:[t&&t.Chaps&&(0,w.jsx)(ee,{bookName:t.name,chapList:t.Chaps}),(0,w.jsx)(te,{totalRelevantBooksChap:C,relationComics:j})]})]})})},oe=(0,h.Z)((function(e){return{root:{width:"1200px",margin:"0 auto",paddingTop:"88px ",paddingBottom:"28px",position:"relative"}}}))}}]);
//# sourceMappingURL=237.c27ca6f8.chunk.js.map